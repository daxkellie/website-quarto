<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2021-09-23">
<meta name="description" content="Transitioning from academia isn’t easy, but it’s not so bad, after all">

<title>Dax Kellie - Out of Academia (and everything’s fine)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/favicon_1.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: #934C12;
      }

      .quarto-title-block .quarto-title-banner {
        color: #934C12;
background: #F8EFE7;
      }
</style>


<link rel="stylesheet" href="../../theme.css">
<meta property="og:title" content="Dax Kellie - Out of Academia (and everything’s fine)">
<meta property="og:description" content="Transitioning from academia isn’t easy, but it’s not so bad, after all">
<meta property="og:site_name" content="Dax Kellie">
<meta name="twitter:title" content="Dax Kellie - Out of Academia (and everything’s fine)">
<meta name="twitter:description" content="Transitioning from academia isn’t easy, but it’s not so bad, after all">
<meta name="twitter:creator" content="@daxkellie">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/favicon-32x32_1.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Dax Kellie</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../portfolio/index.html"> 
<span class="menu-text">Portfolio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../talks/index.html"> 
<span class="menu-text">Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../dataviz/index.html"> 
<span class="menu-text">Dataviz</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../music.html"> 
<span class="menu-text">Music</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/daxkellie"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/daxkellie"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Out of Academia (and everything’s fine)</h1>
                  <div>
        <div class="description">
          <p>Transitioning from academia isn’t easy, but it’s not so bad, after all</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">academia</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 23, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>“I’m out of academia.” That’s how lots of these articles start (and now mine does too!).</p>
<p>I have read my fair share of “leaving academia” articles, many while I was finishing my PhD and feeling unsure about my future. There are more recent ones I have found worth reading, too (<a href="https://mcmullarkey.github.io/mcm-blog/posts/2021-05-18-im-opting-out/">here</a> and <a href="http://crystalprisonzone.blogspot.com/2021/05/smell-you-later.html">here</a>). There’s also lots of stuff on Twitter.</p>
<p></p><div id="tweet-75809"></div><script>tweet={"url":"https:\/\/twitter.com\/michelemeyer\/status\/1382403548596559878","author_name":"Michele Meyer, PhD","author_url":"https:\/\/twitter.com\/michelemeyer","html":"\u003Cblockquote class=\"twitter-tweet\" align=\"center\"\u003E\u003Cp lang=\"en\" dir=\"ltr\"\u003EI think I&#39;m finally comfortable enough to share this publicly: I&#39;ve decided not to pursue a career in academia. \u003Cbr\u003E\u003Cbr\u003E\uD83E\uDDF5\u003C\/p\u003E&mdash; Michele Meyer, PhD (@michelemeyer) \u003Ca href=\"https:\/\/twitter.com\/michelemeyer\/status\/1382403548596559878?ref_src=twsrc%5Etfw\"\u003EApril 14, 2021\u003C\/a\u003E\u003C\/blockquote\u003E\n\u003Cscript async src=\"https:\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"\u003E\u003C\/script\u003E\n\n","width":550,"height":null,"type":"rich","cache_age":"3153600000","provider_name":"Twitter","provider_url":"https:\/\/twitter.com","version":"1.0"};document.getElementById("tweet-75809").innerHTML = tweet["html"];</script><p></p>
<p></p><div id="tweet-63447"></div><script>tweet={"url":"https:\/\/twitter.com\/AMLuger\/status\/1369348381630472194","author_name":"Dr. Allison M. Luger","author_url":"https:\/\/twitter.com\/AMLuger","html":"\u003Cblockquote class=\"twitter-tweet\" align=\"center\"\u003E\u003Cp lang=\"en\" dir=\"ltr\"\u003EI&#39;m not leaving academia, academia is losing me \uD83D\uDC85\u003C\/p\u003E&mdash; Dr. Allison M. Luger (@AMLuger) \u003Ca href=\"https:\/\/twitter.com\/AMLuger\/status\/1369348381630472194?ref_src=twsrc%5Etfw\"\u003EMarch 9, 2021\u003C\/a\u003E\u003C\/blockquote\u003E\n\u003Cscript async src=\"https:\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"\u003E\u003C\/script\u003E\n\n","width":550,"height":null,"type":"rich","cache_age":"3153600000","provider_name":"Twitter","provider_url":"https:\/\/twitter.com","version":"1.0"};document.getElementById("tweet-63447").innerHTML = tweet["html"];</script><p></p>
<p></p><div id="tweet-88436"></div><script>tweet={"url":"https:\/\/twitter.com\/JessieSunPsych\/status\/1416153275338944512","author_name":"Dr. Jessie Sun","author_url":"https:\/\/twitter.com\/JessieSunPsych","html":"\u003Cblockquote class=\"twitter-tweet\" align=\"center\"\u003E\u003Cp lang=\"en\" dir=\"ltr\"\u003EOne of the mindset shifts that has helped me the most is just realising that I can&#39;t let my happiness hinge on whether I ever land a TT job (given how many random factors are at play). As amazing as it would be, I also realise that I could be happy in many other kinds of jobs...\u003C\/p\u003E&mdash; Dr. Jessie Sun (@JessieSunPsych) \u003Ca href=\"https:\/\/twitter.com\/JessieSunPsych\/status\/1416153275338944512?ref_src=twsrc%5Etfw\"\u003EJuly 16, 2021\u003C\/a\u003E\u003C\/blockquote\u003E\n\u003Cscript async src=\"https:\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"\u003E\u003C\/script\u003E\n\n","width":550,"height":null,"type":"rich","cache_age":"3153600000","provider_name":"Twitter","provider_url":"https:\/\/twitter.com","version":"1.0"};document.getElementById("tweet-88436").innerHTML = tweet["html"];</script><p></p>
<div class="panel-caption">
<p>A few tweets I liked. The Michele Meyer thread is worth reading. Also note that Jessie Sun stayed in academia and just got a killer Assistant Prof position woo!</p>
</div>
<p>I have noticed a few trends in “leaving academia” articles. They are usually written very soon after a person has left academia. As a result, their writings can be justifiably emotional, filled with equal parts happiness, frustration, relief and uncertainty. They also tend to mention some of the negative aspects of academia that may have pushed them away, like an incentive structure that favours speed over robustness (which is true in other industries too), a toxic environment that does little to prevent those with power from taking advantage of those without (which isn’t uncommon in other professions—have you seen any political news lately?) and a working environment that demands unsustainably long hours (again, pretty common everywhere).</p>
<p>Unintentionally, my “leaving academia” article is different. It has been nearly 1.5 years since my last academic position, and I have passed the stage of emotional turmoil that accompanies any major career change – you know, the one that readers (like you) secretly love to read about (well u aren’t getting it sorry). There are many issues with academia, but these are true of other professions as well, and so I will try to avoid the complaints.</p>
<p>What I am here to report after a change in career paths: everything is fine.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://media.giphy.com/media/3ohc0QqLZIyTraBWdq/giphy.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>Leaving the academic bubble can be tough. Change is scary enough as it is. Add a fear of failure, a do-or-die motivation to earn professorship, and unending stress about your beloved research progress (and your h-index), and very soon changing career paths becomes completely overwhelming.</p>
<p>I was someone who prided myself at being aware of these pressures. I tried to keep myself at a distance from them to avoid the emotional drain that “failing” academia might bring. I was convinced that I wouldn’t be phased even if I couldn’t land a postdoc. Nevertheless, I was optimistic that getting that perfect new position in a place I wanted to live surely wasn’t as impossible as others had said. But after ~12 unsuccessful applications to various postdocs or scholarships, a pandemic drying up an already sparse academic market, and a partner who was unhappy with her job but forced to keep us financially afloat, I needed to be realistic with my chances of finding an academic job (and earning an income) soon.</p>
<p>So, I ventured out of the academic bubble, if only temporarily (or, that’s what I told myself at the time). My first non-academic job was in the public service supporting suicide prevention initiatives for Aboriginal and Torres Strait Islander people(s). What a cool opportunity! I felt lucky to try working on something important and new to me. But I was immediately confronted with a massive identity crisis. I couldn’t help but think:</p>
<p><em>“What about my research?”</em></p>
<p><em>“I need to stay up-to-date on the literature because, you never know, I might have a chance for something else.”</em></p>
<p><em>“My friends in academia are still moving forward and I can’t be left behind.”</em></p>
<p>These thoughts aren’t cool for my brain to make me think, but it couldn’t help it (still, though, what a jerk).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://media.giphy.com/media/d2kQseYEBMzaU/giphy.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
<figcaption>My brain doesn’t even listen when I’m doing my best Arnie impersonation</figcaption>
</figure>
</div>
<p>It also became clear how much my social media reflected my academic career interests and little else. Twitter became incredibly draining as I simultaneously identified with and felt distant from the people I had once followed so closely. I expected something like this, but not to this extent. But why was I surprised? The last few years of my life were completely wrapped up in my research topic, yet when I finally started to feel minor confidence in my research ability, I had to move on to completely unknown territory.</p>
<p>And that’s my first lesson for anyone else who might consider transitioning from academia: If you choose this path, expect an emotional identity crisis to hit you HARD…but also expect it to subside. As much as you should expect to feel stressed about change, you should expect to feel rejuvenated from new career incentives and new free time for hobbies, friends, partners and family. Over time, you do feel better.</p>
<p>The thing is, feeling rejuvenated didn’t happen immediately for me. It might not for you either. No matter its importance, my first public service job just wasn’t for me (for a number of reasons unrelated to the topic). I wasn’t happy with my new career trajectory even if my work-life balance was suddenly very good.</p>
<p>What I did realise, however, is that the skills acquired over a PhD—critical thinking, writing, argument building, evaluation of statistical results, communication of complex ideas, project organisation, multitasking, giving and receiving feedback—are incredibly valuable but surprisingly rare in combination outside of academia. If there is one bad thing I’ll say about academia, it’s that there is an issue of undervaluing the expertise of early career employees like PhD students and postdocs. Some of my most hard-working and intellectually gifted friends still manage to undervalue themselves, in part because the job market implicitly teaches them to. From start to finish, getting a paper published (unknowingly and perhaps unwillingly) teaches a level of independence, communication and project management that any employer would love to have in an employee.</p>
<p>In fact, I think it would be beneficial for more academic researchers to bring their skill(z) and critical thinking ability to other non-academic roles. I mean, imagine if more people in higher positions were trained to make decisions using evidence-based reasoning, and consider the limitations of their conclusions when results are ambiguous. What a dream!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://media.giphy.com/media/P3hDHzKfpE22c/giphy.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
<figcaption>I like that dream because usually my dreams are more like this</figcaption>
</figure>
</div>
<p>And that’s lesson number two: anyone in academia feeling imposter syndrome or inadequacy compared to their academic peers should realise the incredible number of other skills they can bring to a team. Sometimes it doesn’t feel that way when so much of research is about ensuring you have enough publications and grants to reach the next short-term opportunity. If anything, the research environment can be kinda…lonely. I just want to remind those lonely people: you can have a positive impact outside of research—and outside of publication metrics—if you so choose.</p>
<p>After around 7 months, I found myself searching for a new opportunity yet again. My search landed me at my current job as a data analyst at the Atlas of Living Australia, a data infrastructure that holds all of Australia’s biodiversity data from museums, government agencies and citizen science initiatives. In my role, I spend a lot of time in R making data visualizations, maintaining R packages and occasionally running statistical models. I’m very happy about this. I am also asked to apply what I know about research methods and open science to implement transparency into my team’s workflow (which is pretty friggin’ cool).</p>
<p>I am lucky. I am surrounded by others who are excited by science (and aware of its faults). Many are previous academics themselves. In this environment, although I am just a data analyst with “computer skills,” I am encouraged to pursue initiatives that support transparent and robust science. Rather than the feeling I often had in academia of personal success and failure (“I won a grant” or “I was rejected from a journal”), I now feel team success and failure (“the team reached a milestone” or “the team failed to meet a deadline”). This is a wonderfully welcome change in mindset.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://media.giphy.com/media/3rgXBrLlRs4ZlpnVDO/giphy.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
<figcaption>A real team huddle I once had</figcaption>
</figure>
</div>
<p>I may not be doing research, but I am continuing to learn about things that I am excited to know more about with others working for a common goal. And that is my final lesson for those considering leaving academia: Even outside of the professor “dream job” you will find new opportunities that will make you excited. Will you find the job you do for the rest of your career? Who knows? But there are many careers other than research that value good science and provide moral benefit to the planet (or they try to). To make it even better, your friends from academia will still be your friends, and your work-life balance will bring happiness to many other aspects of your life.</p>
<p>If you can believe it, there is more to life than a high h-index (or whatever other metric your university uses—my university used a metric called Boris lol). Publishing in Nature or Science doesn’t define you as a person (though it’s still very badass…and expensive). It doesn’t really matter what Reviewer 2 thinks about your paper (but srsly why do you hate me and my discussion section Reviewer 2). At the most stressful times in the academic bubble (and this is true of all jobs) it can feel easy to forget that a career is just one aspect of your life. Try not to let it take too much of a hold on you. If you feel that it is, although it may seem scary, life outside of the academic bubble can be pretty alright, too.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://media.giphy.com/media/xT8qAYITi1l7A6m5eo/giphy.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
<figcaption>If Paul says it you know it’s true</figcaption>
</figure>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="https://platform.twitter.com/widgets.js"></script>
</body></html>